# Task2 笔记

#Datawhale #Datawhale AI 夏令营

## 关键词

- ABM (Agent Based Modeling)
- 玻尔兹曼财富模型
- 探索性数据分析 (Exploratory Data Analysis, EDA)
- 鸭子曲线

## 笔记

### 探索性数据分析EDA

建立模型需要考虑问题的特点，以及如何从数据中提取特征。运用各种数据分析工具，对数据进行分析及可视化，可以让我们较快地捕捉到数据的特点，进而有选择地、有策略地拟合这些数据。在baseline1中我们使用了煤炭消耗作为输入进行拟合，这选择的背后有假设分析，但同时也给我带来思考，为什么不能用其他数据？

通过EDA，我们可以对已有的数据进行单变量和多变量的分析，找到更加有用的特征。

例如文档中提到一天中的电价变化呈“鸭子曲线”，即早高峰和晚高峰电价高，10-15点电价低。这种反常识的背后，是光伏发电等其他发电方式对火力发电市场的竞争，这也解释了我之前的疑问：中午给小电驴充电电费较贵hhh

再有不同月份的电价也有变化，这与季节气候变化相关，对光伏、风力发电影响大。不同年份之间也有变化趋势，这与国家的政策有关。这些分析也进一步印证了，这类问题的复杂性，还需要很多额外的数据和知识才能较好的分析。

多变量分析中，运行示例代码可以发现，电量需求与出清价格的相关系数为0.34，两者之间存在着较好的相关程度。**因此，我尝试使用同样的线性模型，拟合电量需求与出清价格，测试的分数为12593.4143，比拟合煤炭消耗与出清价格的分数12939.3371，提高了一点。**再精巧的假设也顶不住暴力拟合（bushi）


（实现电量需求与出清价格的拟合也很简单，只需要在baseline1的基础上修改一下代码）
```python
# 拟合的部分，修改X
X = electricity_price["demand"].iloc[:train_length].values.reshape(-1, 1)
...
# 预测的部分，修改输入
y_pred = model.predict(electricity_price["demand"].iloc[train_length:].values.reshape(-1, 1))
```

从上述分析可以看到，EDA能帮助我们发现有用的数据特征，一方面能用于直接的模型拟合，另一方面能帮助我们思考数据变化规律，找到问题更加深层的理解。

### ABM入门

教程简单讲解了玻尔兹曼财富模型，并且使用python的mesa库进行模拟。整体的流程分为构建环境和构建智能体：定义环境的组成，例如地图等；定义智能体，例如每一步如何交互。完成以上步骤，根据同步或者异步的需要，迭代环境，智能体进行每一步的交互，在若干迭代后查看结果。而基于玻尔兹曼财富模型的ABM模拟结果为，少部分人掌握大部分的财富。

通过建模、迭代的方式，我们能够免去复杂的理论分析，通过模拟直观地看到过程变化。同样地，我们在遇到多个个体参与决策的问题时，可以把每一个个体当作智能体，对环境进行建模，通过智能体之间的交互，推演未来的变化。

我在学习这部分内容时，发现与强化学习非常相似。强化学习包括几大组成部分：环境、观察空间、动作空间、奖励。在玻尔兹曼财富模型ABM中，环境模型与强化学习中的环境类似；智能体查看自己的分数以决定如何行动，与强化学习中输入观察得到动作概率分布类似；智能体的给予分数，与强化学习中每一步从动作空间中采取动作类似；强化学习中的奖励部分在这个ABM的例子中没有相似的，但是我们能想象到建立一个更加复杂的模型，智能体的策略并不是写死的，而是可以不断学习优化，奖励的概念就出现了。

综上，ABM很有趣，来多一点罢。

## 总结

- 电价分析很复杂，有时候需要用到外部数据和知识进行分析
- 通过EDA能够帮助我们找到有用的数据特征，进而找到更好的拟合
- 电价的时间序列分析能看到，与年份、季节、一天中的时间相关，这启发我们可以对不同时间节点进行不同模型的构建
- ABM通过模拟环境与智能体，迭代推演未来的变化，希望能快点学习到如何应用在电力分析这类问题中
